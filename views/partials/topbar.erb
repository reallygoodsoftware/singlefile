<header class="flex w-full shadow py-4 px-3 items-center justify-between">
  <h1 class="ui-title --lg">
    <%= metadata[:title] %>
  </h1>

  <div class="flex items-center gap-2">
    <a href="/" class="ui-button --minimal <%= request.path_info == '/' ? 'bg-gray-100' : '' %>">
      Home
    </a>

    <% if logged_in? %>
      <!-- Protected pages menu items -->
      <a href="/code" class="ui-button --minimal <%= request.path_info == '/code' ? 'bg-gray-100' : '' %>">
        Code
      </a>
      <a href="/quiz" class="ui-button --minimal <%= request.path_info == '/quiz' ? 'bg-gray-100' : '' %>">
        Quiz
      </a>

      <!-- User menu -->
      <div class="relative">
        <button popovertarget="user-menu" class="ui-button --minimal flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
          </svg>
          <span><%= current_user.display_name %></span>
        </button>

        <div class="--drawer --bottom-right --anchor-right p-1 min-w-48" id="user-menu" popover>
          <div class="px-3 py-2 text-sm text-gray-500 border-b mb-1">
            <div class="font-medium text-gray-800"><%= current_user.email %></div>
            <% if current_user.name.present? %>
              <div class="text-xs text-gray-500 mt-1"><%= current_user.name %></div>
            <% end %>
          </div>

          <a href="/logout" class="ui-button --minimal w-full justify-start text-red-600">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
            </svg>
            Log out
          </a>
        </div>
      </div>
    <% else %>
      <!-- Login button for non-authenticated users -->
      <a href="/login" class="ui-button --solid">
        Sign In
      </a>
    <% end %>
  </div>
</header>